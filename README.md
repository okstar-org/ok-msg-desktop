h1 align="center">OkMSG Desktop</h1>

# ğŸ é¡¹ç›®ä»‹ç»

OkMSGæ˜¯ç”±OkStar(okstar.org)ç¤¾åŒºå¼€å‘å’Œç»´æŠ¤çš„æ³¨é‡æ•°æ®å®‰å…¨ä¸ä¿æŠ¤çš„ä¼ä¸šé€šè®¯ååŒå·¥å…·ï¼Œæ”¯æŒç‹¬ç«‹ç§æœ‰åŒ–éƒ¨ç½²çš„é›†å³æ—¶æ¶ˆæ¯ã€è¯­éŸ³ã€è§†é¢‘é€šè¯ã€å‘é€æ–‡ä»¶ã€ä¼šè®®ç­‰å¤šç§åŠŸèƒ½äºä¸€èº«çš„å¼€æºé¡¹ç›®ï¼ŒåŒæ—¶è®©æ‚¨çš„ä¼ä¸šæ›´åŠ æœ‰æ•ˆå¼€å¯åä½œã€æœ‰æ•ˆæ²Ÿé€šï¼Œæ§åˆ¶æˆæœ¬ï¼Œå¼€æ‹“æ–°ä¸šåŠ¡ï¼Œå¹¶å¸®åŠ©æ‚¨åŠ é€Ÿå‘å±•ä¸šåŠ¡ã€‚

OkMSG is an enterprise communication collaboration tool developed and maintained by the OkStar (okstar. org) community that focuses on data security and protection. It supports independent private deployment and is an open-source project that integrates multiple functions such as instant messaging, voice, video calling, file sending, and meetings. It enables your enterprise to more effectively initiate collaboration, communicate effectively, control costs, explore new businesses, and help you accelerate business development.

OkMSGçš„è¯ç”Ÿä¸»è¦è§£å†³ä¼ä¸šä¿¡æ¯åŒ–è¿‡ç¨‹ä¸­é¢å¯¹çš„é—®é¢˜ï¼š
â€¢ è¿œç¨‹ååŒå·¥å…·æé«˜å·¥ä½œæ•ˆç‡åŒæ—¶,å¦‚ä½•ä¿éšœä¼ä¸šæ•°æ®å®‰å…¨å’Œéšç§ã€è‡ªä¸»å¯æ§å°†æˆä¸ºä¼ä¸šæœ€æ ¸å¿ƒçš„é—®é¢˜ã€‚
â€¢ å¸‚é¢ä¸Šç°æœ‰äº§å“åŒè´¨åŒ–ä¸¥é‡ï¼Œå¸‚åœºéœ€è¦ä¸€æ¬¾æœ‰æœ¬è´¨åŒ–å·®å¼‚çš„äº§å“ã€‚

# ğŸ§­ åŠŸèƒ½ä»‹ç»
- èŠå¤©æ¨¡å—
  - å…·å¤‡å•èŠã€ç¾¤èŠï¼›
  - æ”¯æŒæ–‡å­—ã€éŸ³è§†é¢‘ã€æ–‡ä»¶ä¼ è¾“ç­‰åŸºæœ¬åŠŸèƒ½ï¼›
  - æ¶ˆæ¯ç«¯åˆ°ç«¯åŠ å¯†ã€‚

# ğŸ¢ è½¯ä»¶æ¶æ„


# ğŸ–¼ï¸ ç•Œé¢å±•ç¤º


# â›½ ç¬¬ä¸‰æ–¹åº“

- CMake ([New BSD License](https://github.com/Kitware/CMake/blob/master/Copyright.txt))
- WebRTC ([New BSD License](https://github.com/desktop-app/tg_owt/blob/master/LICENSE))
- OpenSSL 3.0.x ([OpenSSL License](https://www.openssl.org/source/license.html))
- qTox([GPL v3](https://github.com/qTox/qTox/LICENSE))
- gloox ([GPL v3](https://gitee.com/chuanshantech/ok-edu-gloox))
- OpenAL Soft ([LGPL](https://github.com/kcat/openal-soft/blob/master/COPYING))
- FFmpeg ([LGPL](https://www.ffmpeg.org/legal.html))
- Qt 5.15 ([LGPL](http://doc.qt.io/qt-5/lgpl.html))
- zlib ([zlib License](http://www.zlib.net/zlib_license.html))
- Sqlite3 ([Public Domain](https://sqlite.org/copyright.html))
- Sodium([ISC license.](https://github.com/jedisct1/libsodium))
- libexif([GPL v2](https://github.com/libexif/libexif/blob/master/COPYING))
- libqrencode([GPL v2+](https://github.com/fukuchi/libqrencode))

# ğŸ–¥ï¸ æ”¯æŒå¹³å°
> ğŸ§ Linux
- Ubuntu  å·²æ”¯æŒ

> ğŸªŸ Windows
- Windows10+ å·²æ”¯æŒ

> ğŸ macOS
- è®¡åˆ’ä¸­

# ğŸ§° ç¼–è¯‘å™¨æ”¯æŒ
- âœ… æ”¯æŒ GCC On Linux
- âœ… æ”¯æŒ Clang On Linux
- âœ… æ”¯æŒ MSVC On Windows
- âœ… æ”¯æŒ Clang On Windows

# âš™ï¸ æ„å»ºå¼€å‘
æœ¬é¡¹ç›®ç›®å‰æ”¯æŒWindowså’ŒLinuxç¯å¢ƒå¼€å‘ï¼ŒmacOSç¯å¢ƒæ­£åœ¨è§„åˆ’ä¸­
- C++ç‰ˆæœ¬ï¼šC++20
- Qtç‰ˆæœ¬ï¼šQt5.15.x

## Windows æ„å»º
- å®‰è£…`visual studio 17 2022`

- é…ç½®vcpkg
```shell
#è®¾ç½®vcpkgè·¯å¾„ï¼Œä¹Ÿå¯ä»¥å‚è€ƒå®˜ç½‘ä¸‹è½½ï¼šhttps://github.com/microsoft/vcpkg/blob/master/README_zh_CN.md
VCPKG_ROOT=E:\Program Files\Microsoft Visual Studio\2022\Community\VC\vcpkg
#å¯é€‰ï¼Œé»˜é»˜Cç›˜
VCPKG_DOWNLOADS=ä¸‹è½½è·¯å¾„
```

- å®‰è£…vcpkgä¾èµ–åŒ…
```shell
# è¿›å…¥é¡¹ç›®è·Ÿç›®å½•ï¼ˆåŒ…å«vcpkg.jsonï¼‰ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤
vcpkg install --triplet x64-windows
```

- é…ç½®pkg-configå…³è”
è¿™ä¸€æ­¥å®ç°pkg-configåˆ°vcpkgå®‰è£…åŒ…çš„å…³è”ï¼Œä¾¿äºcmake pkg-configæ¨¡å—èƒ½æ£€ç´¢åˆ°ã€‚
```shell
# é…ç½®ç¯å¢ƒå˜é‡
PKG_CONFIG_PATH=<é¡¹ç›®æ ¹ç›®å½•>/vcpkg_installed/x64-windows/lib/pkgconfig
```
å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨vcpkgå®‰è£…çš„æ–°åŒ…ã€‚
  
    pkg-config.bat --list-all


- ç¼–è¯‘OkRTCåº“
```shell
git clone https://github.com/okstar-org/ok-rtc.git
# CMakeé¢„å¤„ç†
 E:\QtWorkspace\ok-rtc> cmake -B out -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE='$env{VCPKG_ROOT}\scripts\buildsystems\vcpkg.cmake' -DCMAKE_PREFIX_PATH='${PROJECT_ROOT}\vcpkg_installed\x64-windows'
# æ„å»º
E:\QtWorkspace\ok-rtc> cmake --build out --config Release --target ALL_BUILD -j 4
```
- ç¼–è¯‘OkGlooxåº“
```shell
git clone https://github.com/okstar-org/ok-gloox.git
# CMakeé¢„å¤„ç†
 E:\QtWorkspace\ok-gloox>  cmake -G "Visual Studio 17 2022" -B .\out\
# æ„å»º
E:\QtWorkspace\ok-gloox>  cmake --build .\out\ --config Release --target ALL_BUILD -j 4
```

- æ„å»ºOkMSGé¡¹ç›®

1. ä¿®æ”¹CMakeé¢„è®¾æ–‡ä»¶CMakeUserPresets.json(è¯¥æ–‡ä»¶æ˜¯é’ˆå¯¹ç”¨æˆ·æœ¬åœ°ç¯å¢ƒçš„é…ç½®ï¼Œä¸è¦æäº¤)ï¼Œåˆ—å­å¦‚ä¸‹ï¼š
> æ­¤å¤„ä¸»è¦åˆ©ç”¨ `CMAKE_PREFIX_PATH` å…³è”åˆ°ç¬¬ä¸‰æ–¹åº“ï¼ˆè°ƒè¯•åº“ï¼‰ï¼Œæ¯”å¦‚ï¼šQtã€VcPkgä¸‹è½½çš„åº“ã€OkRTCç­‰
```json
{
  "version": 3,
  "configurePresets": [
    {
      "name": "win-x64-release",
      "displayName": "Windows x64 Release",
      "binaryDir": "${sourceDir}/out/${presetName}",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Release",
        "CMAKE_PREFIX_PATH": "E:/QtWorkspace/ok-rtc/out/Release;${sourceDir}/vcpkg_installed/x64-windows;E:/Qt/Qt5.15.7-Windows-x86_64-VS2019-16.11.20-staticFull"
      }
    },
    {
      "name": "win-x64-debug",
      "displayName": "Windows x64 Debug",
      "binaryDir": "${sourceDir}/out/${presetName}",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_PREFIX_PATH": "E:/QtWorkspace/ok-rtc/out/Debug;${sourceDir}/vcpkg_installed/x64-windows;E:/Qt/Qt5.15.11-Windows-x86_64-VS2022-staticFull-debug"
      }
    }
  ]
}
```

2. æ‰§è¡Œæ„å»ºå‘½ä»¤
```shell
# é¢„å¤„ç†
cmake -B build --preset win-x64-{debug|release}
cmake --build build
```

# Linux æ„å»º
## Ubuntu 22.04
> å®‰è£…ä¾èµ–
```shell
sudo apt install -y gcc g++ clang yasm  
sudo apt install -y qtcreator qtbase5-dev  qtmultimedia5-dev libqt5svg5-dev qttools5-dev
sudo apt install -y libcrypto++-dev  libssl-dev
sudo apt install -y libpipewire-0.3-dev libxss-dev libgbm-dev libdrm-dev libxdamage-dev libxrender-dev libxrandr-dev libxtst-dev \
  libasound2-dev libpulse-dev libavcodec-dev libavformat-dev libswscale-dev libavdevice-dev libvpx-dev \
  libopus-dev libjpeg-dev libopenal-dev libopenh264-dev \
  libexif-dev libqrencode-dev libsodium-dev libsqlite3-dev
```
> æ„å»ºOkRtcæ¨¡å—
```shell
git clone https://github.com/okstar-org/ok-rtc.git
cd ok-rtc

# CMake æ„å»º
cmake -B out  && cmake --build out
# CMake å®‰è£…
sudo cmake --install out
```

## Fedora 36
```shell
dnf update -y
dnf install -y gcc g++
dnf install -y qt5-qtbase-devel qt6-qtbase-gui  qt5-qtmultimedia-devel \
  qt5-qtsvg-devel qt5-qttools-devel qt5-qttools-static \
  libavcodec-free-devel libavdevice-free-devel \
  libexif-free-devel qrencode-devel libsodium-devel sqlite3-devel \
  libvpx-devel openal-soft-devel openssl-devel
```

```shell
# é¢„å¤„ç†
cmake -B build -DCMAKE_BUILD_TYPE={Debug|Release} [-DOK_CPACK=1  #(æ‰“åŒ…DEBã€RPM)]
# æ„å»º
cmake --build build [--target package #(æ‰“åŒ…DEBã€RPM)]
```

# Downloads
æœ¬é¡¹ç›®æ”¯æŒWindowsã€Linuxæ”¯æŒå¤šç§å®‰è£…æ–¹å¼
- ä¸‹è½½åœ°å€: https://github.com/okstar-org/ok-msg-desktop/releases

<table>
    <tr>
        <th></th>
        <th>Windows</th>
        <th>Ubuntu (64-bit)</th>
        <th>Fedora (64-bit)</th>
        <th>Android</th>
        <th>macOS</th>
        <th>iOS</th>
    </tr>
    <tr>
        <th>v24.03.0</th>
        <td>
          <a href="https://github.com/okstar-org/ok-msg-desktop/releases/download/v24.03.0/ok-msg-desktop_windows-latest_x64.zip">Windows 10+</a>
        </td>
        <td>
            <a href="https://github.com/okstar-org/ok-msg-desktop/releases/download/v24.03.0/ok-msg-desktop_ubuntu-22.04_x86_64.deb">Ubuntu 22.04 (deb)</a><br>
            <a href="https://snapcraft.io/ok-msg"><img decoding="async" class="aligncenter" src="https://snapcraft.io/static/images/badges/en/snap-store-black.svg" alt="Get it from the Snap Store"><br></a>
        </td>
        <td>
            <a href="https://github.com/okstar-org/ok-msg-desktop/releases/download/v24.03.0/ok-msg-desktop_fedora-36_x86_64.deb">Fedora 36</a><br>
        </td>
        <td><a href="https://www.pgyer.com/0UruoU">Android</a></td>
        <td>
          è§„åˆ’ä¸­ 
        </td>
        <td>è§„åˆ’ä¸­</td>
    </tr>
</table>

# âš’ï¸ å¼€å‘è§„èŒƒ
- å¼€å‘è€…è§„çº¦ï¼ˆè¿›è¡Œä¸­ï¼‰

# ğŸ—“ï¸ ç‰ˆæœ¬è§„åˆ™


# ğŸ™ æ„Ÿè°¢æ”¯æŒ
- æ„Ÿè°¢ç¤¾åŒºæˆå‘˜çš„é¼åŠ›æ”¯æŒç­‰
- [æ„Ÿè°¢ JetBrains å¯¹æœ¬é¡¹ç›®çš„æ”¯æŒï¼ˆDrive by JetBrainsï¼‰](https://jb.gg/OpenSourceSupport) <img width="64" src="https://resources.jetbrains.com/storage/products/company/brand/logos/jb_beam.svg?_ga=2.83044246.1221182059.1672752920-1856866598.1665301971&_gl=1*3fzoi7*_ga*MTg1Njg2NjU5OC4xNjY1MzAxOTcx*_ga_9J976DJZ68*MTY3Mjc1MjkyMC40LjEuMTY3Mjc1NDM0Ni4wLjAuMA">

# â¤ï¸ æèµ æ–¹å¼

> æ‚¨çš„ææ¬¾æ˜¯OkMSGå¼€æºé¡¹ç›®æŒç»­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¸Œæœ›è¯¥é¡¹ç›®å¯ä»¥è®©ä»»ä½•äººä»ä¸­å—ç›Šã€‚
> æèµ åˆ—è¡¨ https://kdocs.cn/l/cr7rVyXnbxuK

<div>
<img src="./docs/donate/wx.png" width="240"  alt=""/> 
<img src="./docs/donate/zfb.png" width="240"  alt=""/>
</div>

> æ¬¢è¿å¤§å®¶ Clone æœ¬é¡¹ç›®ï¼Œæèµ æ”¶å…¥å°†ç”¨äºå¯¹è´¡çŒ®è€…çš„å¥–åŠ±ã€‚

# ğŸ­ ç¤¾åŒºå»ºè®¾

> ä¸ºäº†OkMSGé¡¹ç›®èƒ½é•¿æœŸæœ‰åºæœ‰è´¨é‡å‘å±•ï¼Œè¯šé‚€æœ‰æ¢¦æƒ³æƒ…æ€€äººå£«åŠ å…¥ï¼Œä¸€èµ·å»ºè®¾ç¤¾åŒºï¼Œ
> ç›®å‰è§„åˆ’éœ€è¦å¦‚ä¸‹æ–¹é¢äººæ‰ï¼š

- å¼€å‘ã€é—®é¢˜åé¦ˆã€ Bugä¿®å¤
- æ–‡æ¡£ã€ç¿»è¯‘ã€è®¾è®¡ã€å“æ§
- æ”¯æŒã€æ¨å¹¿ã€æŠ•èµ„ã€é¡¹ç›®ç®¡ç†

> ç¤¾åŒºæ¨¡å¼ï¼šæ•¬è¯·æœŸå¾…ã€‚ã€‚ã€‚
- æ¬¢è¿åŠ å…¥ [OkStar ç¤¾åŒº](http://okstar.org)


# ğŸ§‘â€ğŸ¤â€ğŸ§‘ è´¡çŒ®è€…
> æ¬¢è¿åŠ å…¥å‚ä¸ç¤¾åŒºå»ºè®¾
- [æ›´å¤š](https://github.com/okstar-org/ok-msg-desktop/contributors?ref=master)

# ğŸ’° èµåŠ©å•†

- æ¹–å—èˆ¹å±±ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸
- Joy1024ï¼ˆä¸ªäººï¼‰
- ç¤¾åŒºæ”¯æŒè€…ä»¬

# ğŸ“¦ æ¬¢è¿ä½“éªŒ
- ä¸‹è½½åœ°å€ï¼šhttps://www.chuanshaninfo.com/download/OkMSG/

# â˜ï¸ è”ç³»æˆ‘ä»¬

> æŠ€æœ¯äº¤æµç¾¤ï¼Œæ·»åŠ å¾®ä¿¡

![OkStarå…¬ä¼—å·](./docs/assets/assistant-OkEDU.jpg "OkStar")

> å¾®ä¿¡å…¬ä¼—å·ï¼Œå…³æ³¨è´¦å·

![OkStarå…¬ä¼—å·](./docs/assets/gzh-OkEDU.jpg "OkStar")


# Â©ï¸ ç‰ˆæƒä¿¡æ¯

> æœ¬è½¯ä»¶å·²ç»ç”³è¯·è½¯ä»¶è‘—ä½œæƒå’Œå•†æ ‡ã€‚
> æœ¬é¡¹ç›®é‡‡ç”¨åŒé‡æˆæƒï¼Œè¯·æŒ‰åˆè§„æ­£ç¡®ä½¿ç”¨æœ¬é¡¹ç›®ï¼

1.éµå¾ªè½¯ä»¶åˆ†å‘åè®®
  - å›½é™…ï¼š**[GPL-2.0](https://opensource.org/license/gpl-2-0/)**
  - ä¸­å›½ï¼š**[æœ¨å…°å…¬å…±è®¸å¯è¯, ç¬¬2ç‰ˆ](https://opensource.org/license/mulanpsl-2-0/)**

2.ä»˜è´¹å¾—åˆ°å•†ä¸šæˆæƒï¼ˆè¯•è¡Œï¼‰
  - [OkMSGè½¯ä»¶åˆä½œä¼™ä¼´åˆåŒ-ä¸ªäººç‰ˆ](https://www.kdocs.cn/l/cgdtyImooeol)
  - [ä¼ä¸šç‰ˆè½¯ä»¶æˆæƒï¼Œè¯·ç§»æ­¥ğŸ‘‰ chuanshaninfo.com](https://www.chuanshaninfo.com/)